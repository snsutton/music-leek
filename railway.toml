# Railway Config-as-Code
# Documentation: https://docs.railway.com/guides/config-as-code

[build]
builder = "nixpacks"
buildCommand = "npm run build"

[deploy]
# Auto-deploy commands to Discord on startup, then start the bot
# Use direct node execution to ensure SIGTERM reaches the app (not npm)
startCommand = "npm run deploy-commands && node dist/index.js"

# Health check endpoint (Express server on port 3000)
healthcheckPath = "/health"
healthcheckTimeout = 100

# Restart policy
restartPolicyType = "on_failure"
